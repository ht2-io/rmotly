name: Assign Copilot to Issues

on:
  issues:
    types: [labeled]

jobs:
  assign-copilot:
    runs-on: ubuntu-latest
    # Only run when the 'copilot' label is added
    if: github.event.label.name == 'copilot'

    permissions:
      issues: write

    steps:
      - name: Assign Copilot to issue
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          ISSUE_NUMBER: ${{ github.event.issue.number }}
        run: |
          echo "Assigning Copilot to issue #${ISSUE_NUMBER}"

          # Use GitHub CLI to assign Copilot coding agent to the issue
          gh issue edit "${ISSUE_NUMBER}" --add-assignee "@copilot"

          echo "Successfully assigned Copilot to issue #${ISSUE_NUMBER}"
